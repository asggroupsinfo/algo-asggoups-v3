---
trigger: always_on
---

{
  "messages": [
    {
      "role": "system",
      "content": "====================\nDOCUMENTATION EXCELLENCE RULES\n====================\n\n**MISSION:** Create living documentation that evolves with code, is always accurate, and enables everyone to succeed.\n\n====================\n1) DOCUMENTATION AS CODE\n====================\n**Core Principles:**\n- Store documentation WITH code in same repository\n- Use same review process as code (PRs, reviews)\n- Treat documentation changes with same importance as code changes\n- Version documentation alongside code\n- Automate documentation generation where possible\n\n**Documentation Structure:**\n```\n/docs\n├── /api              # API documentation\n├── /architecture     # Architecture decisions and diagrams\n├── /development      # Development setup and guides\n├── /deployment       # Deployment procedures\n├── /operations       # Runbooks, monitoring, troubleshooting\n├── /user-guides      # End-user documentation\n├── /contributing     # How to contribute to the project\n└── /adr              # Architecture Decision Records\n\n/README.md            # Project overview\n/CONTRIBUTING.md      # Contribution guidelines\n/CODE_OF_CONDUCT.md   # Community standards\n/SECURITY.md          # Security policy\n/CHANGELOG.md         # Release notes\n```\n\n**Documentation Tools:**\n- **Markdown:** Primary format (GitHub Flavored Markdown)\n- **MkDocs:** Static site generator\n- **Docusaurus:** Documentation framework\n- **Sphinx:** Python documentation generator\n- **Swagger/OpenAPI:** API documentation\n- **PlantUML/Mermaid:** Diagrams as code\n- **Jekyll:** Blog-aware static site\n\n**Documentation Quality Checks:**\n- Spelling and grammar checks\n- Broken link detection\n- Code snippet validation\n- Style guide compliance\n- Regular documentation reviews\n\n====================\n2) API DOCUMENTATION STANDARDS\n====================\n**OpenAPI/Swagger Standards:**\n```yaml\nopenapi: 3.0.3\ninfo:\n  title: API Title\n  version: 1.0.0\n  description: Comprehensive API documentation\n  contact:\n    name: API Team\n    email: api@example.com\nservers:\n  - url: https://api.example.com/v1\npaths:\n  /users:\n    get:\n      summary: Get users\n      parameters:\n        - name: limit\n          in: query\n          schema:\n            type: integer\n            minimum: 1\n            maximum: 100\n      responses:\n        '200':\n          description: Successful response\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/UserList'\ncomponents:\n  schemas:\n    User:\n      type: object\n      properties:\n        id:\n          type: integer\n        name:\n          type: string\n      required:\n        - id\n        - name\n```\n\n**API Documentation Must Include:**\n- Authentication methods\n- Rate limiting information\n- Error responses with examples\n- Request/response examples\n- SDK/client library information\n- Migration guides between versions\n- Deprecation policies\n\n**Interactive API Documentation:**\n- Swagger UI or ReDoc for exploration\n- Try-it functionality (where safe)\n- Code generation for clients\n- Postman/Insomnia collections\n- Automated example generation\n\n**API Versioning Documentation:**\n- Versioning strategy explanation\n- Breaking changes log\n- Migration guides between versions\n- Sunset policy for deprecated versions\n- Version compatibility matrix\n\n====================\n3) ARCHITECTURE DECISION RECORDS (ADRs)\n====================\n**ADR Format:**\n```markdown\n# [short title of solved problem and solution]\n\n## Status\n[proposed | accepted | deprecated | superseded]\n\n## Context\n[What is the issue that we're seeing that is motivating this decision or change?]\n\n## Decision\n[What is the change that we're proposing and/or doing?]\n\n## Consequences\n[What becomes easier or more difficult to do because of this change?]\n\n## Alternatives Considered\n[What other options did we consider? Why did we reject them?]\n\n## Compliance\n[How will we verify this decision is being followed?]\n\n## Notes\n[Additional notes, diagrams, or references]\n\n## Related Decisions\n[Links to related ADRs]\n```\n\n**ADR Management:**\n- Store in `/docs/adr/` directory\n- Number sequentially (ADR-001, ADR-002)\n- Review and update status regularly\n- Link ADRs to code changes\n- Use in architecture reviews\n\n**ADR Categories:**\n- **Technology Decisions:** Framework, database, tool choices\n- **Architecture Decisions:** Patterns, system design\n- **Process Decisions:** Workflow, deployment strategies\n- **Organizational Decisions:** Team structure, responsibilities\n\n**ADR Lifecycle:**\n1. **Proposed:** Under discussion\n2. **Accepted:** Decision made, being implemented\n3. **Deprecated:** No longer relevant\n4. **Superseded:** Replaced by new decision\n5. **Amended:** Modified after acceptance\n\n====================\n4) RUNBOOKS & PLAYBOOKS\n====================\n**Runbook Structure:**\n```markdown\n# [Service Name] Runbook\n\n## Overview\n[Service purpose, dependencies, owners]\n\n## Health Checks\n[How to verify service is healthy]\n\n## Common Issues\n### Issue 1: [Description]\n**Symptoms:**\n- Symptom 1\n- Symptom 2\n\n**Diagnosis:**\n1. Check [metric/link]\n2. Verify [condition]\n3. Test [functionality]\n\n**Resolution:**\n1. Step 1\n2. Step 2\n3. Step 3\n\n**Verification:**\n[How to confirm issue is resolved]\n\n### Issue 2: [Description]\n[...]\n\n## Maintenance Procedures\n### Procedure 1: [Description]\n**Frequency:** [Daily/Weekly/Monthly]\n**Duration:** [Estimated time]\n**Steps:**\n1. Step 1\n2. Step 2\n3. Step 3\n\n**Rollback Plan:**\n[What to do if procedure fails]\n\n## Emergency Contacts\n- Primary: [Name] - [Role] - [Contact]\n- Secondary: [Name] - [Role] - [Contact]\n- Escalation: [Name] - [Role] - [Contact]\n```\n\n**Playbook Categories:**\n- **Incident Response:** Security breaches, outages\n- **Deployment Procedures:** Release processes\n- **Maintenance Tasks:** Regular upkeep activities\n- **Recovery Procedures:** Disaster recovery steps\n- **Customer Communication:** External messaging templates\n\n**Runbook Automation:**\n- Link to monitoring dashboards\n- Integration with alerting systems\n- Automated remediation scripts\n- ChatOps integration (Slack commands)\n- Self-service operations portal\n\n====================\n5) KNOWLEDGE SHARING SYSTEMS\n====================\n**Knowledge Base Structure:**\n- **How-to Guides:** Step-by-step instructions\n- **Tutorials:** Learning-oriented guides\n- **Reference:** Technical specifications\n- **Explanation:** Concepts and context\n- **Troubleshooting:** Problem-solving guides\n\n**Knowledge Sharing Platforms:**\n- **Confluence:** Enterprise wiki\n- **Notion:** All-in-one workspace\n- **GitHub Wiki:** Integrated with repositories\n- **BookStack:** Simple, self-hosted\n- **Slab:** Team knowledge base\n\n**Knowledge Management Practices:**\n- Regular knowledge sharing sessions\n- Brown bag lunches\n- Internal tech talks\n- Pair programming rotations\n- Documentation sprints\n\n**Search Optimization:**\n- Consistent tagging system\n- Table of contents for long documents\n- Cross-referencing between documents\n- Search engine optimization for internal search\n- Regular content pruning and updates\n\n====================\n6) DOCUMENTATION TESTING\n====================\n**Documentation Testing Types:**\n- **Code Example Validation:** Test all code snippets\n- **Link Validation:** Check all hyperlinks work\n- **Command Validation:** Test all terminal commands\n- **Screenshot Validation:** Ensure screenshots are current\n- **Tutorial Validation:** Walk through tutorials end-to-end\n\n**Automated Documentation Testing:**\n```yaml\n# Example in CI pipeline\njobs:\n  docs-test:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v2\n      \n      - name: Validate Markdown\n        uses: gaurav-nelson/github-action-markdown-link-check@v1\n        with:\n          config-file: '.github/markdown-link-check-config.json'\n      \n      - name: Test Code Examples\n        run: |\n          find docs -name \"*.md\" -exec grep -l \"```\" {} \\; | \\\n          xargs -I {} sh -c 'echo \"Testing {}...\" && \\\n          extract_code_from_md {} | \\\n          while read -r code; do echo \"$code\" | python -m py_compile -; done'\n      \n      - name: Build Documentation\n        run: mkdocs build --strict\n```"
    }
  ]
}