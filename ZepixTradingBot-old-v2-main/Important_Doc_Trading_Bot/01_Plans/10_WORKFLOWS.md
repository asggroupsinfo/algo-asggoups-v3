# 10 - Complete Workflows & Processes

## ğŸ”„ End-to-End Process Flows

This document shows complete workflows from start to finish.

---

## Workflow 1: Trade Entry (Complete Flow)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 1: SIGNAL GENERATION (TradingView)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ TradingView indicator triggers
    â”‚ Strategy: ZepixPremium
    â”‚ Timeframe: 1h
    â”‚ Symbol: EURUSD
    â”‚ Signal: BUY
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 2: ALERT TRANSMISSION                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ POST http://bot-server:80/webhook
    â”‚ JSON: {
    â”‚   "type": "entry",
    â”‚   "symbol": "EURUSD",
    â”‚   "signal": "buy",
    â”‚   "tf": "1h",
    â”‚   "price": 1.1000
    â”‚ }
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 3: ALERT PROCESSING (Bot)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Webhook endpoint receives alert
    â”‚ AlertProcessor.process_alert()
    â”‚
    â”œâ”€â–º Validate JSON format âœ“
    â”œâ”€â–º Check required fields âœ“
    â”œâ”€â–º Map symbol (EURUSD â†’ EURUSD.a) âœ“
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 4: TREND VALIDATION                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ TimeframeTrendManager.check_alignment()
    â”‚
    â”œâ”€â–º Get 15m trend: BULLISH âœ“
    â”œâ”€â–º Get 1h trend: BULLISH âœ“
   â”œâ”€â–º Get 1d trend: BULLISH âœ“
    â”‚
    â”‚ Signal direction: BUY
    â”‚ Required trend: BULLISH
    â”‚ Alignment: YES âœ“
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 5: RISK VALIDATION                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ RiskManager.validate_entry()
    â”‚
    â”œâ”€â–º Check daily loss cap:
    â”‚   Used: $50 / $100 available âœ“
    â”‚
    â”œâ”€â–º Check lifetime loss cap:
    â”‚   Used: $200 / $500 available âœ“
    â”‚
    â”œâ”€â–º Get lot size for current tier:
    â”‚   Tier: $10,000 â†’ 0.10 lots âœ“
    â”‚
    â”œâ”€â–º Check MT5 margin:
    â”‚   Required: $100
    â”‚   Available: $5,000 âœ“
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 6: ORDER CALCULATION                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ TradingEngine.prepare_order()
    â”‚
    â”œâ”€â–º Current price: 1.10000
    â”‚
    â”œâ”€â–º Calculate SL (SL-1 system, 10%):
    â”‚   SL = 1.10000 - (1.10000 Ã— 0.10)
    â”‚      = 1.09000
    â”‚   Risk = 100 pips
    â”‚
    â”œâ”€â–º Calculate TP (1.5x RR):
    â”‚   TP = 1.10000 + (100 pips Ã— 1.5)
    â”‚      = 1.11500
    â”‚   Reward = 150 pips
    â”‚
    â”œâ”€â–º Validate RR ratio:
    â”‚   150 / 100 = 1.5 âœ“
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 7: DUAL ORDER CREATION                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ DualOrderManager.create_orders()
    â”‚
    â”œâ”€â–º ORDER A (TP Trail):
    â”‚   â”‚ Symbol: EURUSD.a
    â”‚   â”‚ Type: BUY
    â”‚   â”‚ Lots: 0.10
    â”‚   â”‚ Entry: 1.10000
    â”‚   â”‚ SL: 1.09000 (100 pips)
    â”‚   â”‚ TP: 1.11500 (150 pips)
    â”‚   â”‚ Comment: "LOGIC2_BUY_TF1h_A"
    â”‚   â”‚ Chain ID: [assigned]
    â”‚   â””â”€â–º MT5Client.place_order() âœ“
    â”‚       Position: 123456789
    â”‚
    â””â”€â–º ORDER B (Profit Booking):
        â”‚ Symbol: EURUSD.a
        â”‚ Type: BUY
        â”‚ Lots: 0.10
        â”‚ Entry: 1.10000
        â”‚ SL: calculated for $10 risk
        â”‚ TP: calculated for $7 profit
        â”‚ Comment: "LOGIC2_BUY_TF1h_B"
        â”‚ Chain ID: [same chain_id]
        â””â”€â–º MT5Client.place_order() âœ“
            Position: 123456790
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 8: DATABASE STORAGE                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚  Database.insert_trade()
    â”‚
    â”œâ”€â–º Store Order A:
    â”‚   - Position ID: 123456789
    â”‚   - Entry time, price
    â”‚   - SL, TP values
    â”‚   - Chain ID
    â”‚
    â””â”€â–º Store Order B:
        - Position ID: 123456790
        - Entry time, price
        - SL, TP values
        - Chain ID
        - Profit chain level: 1
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 9: NOTIFICATIONS                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ TelegramBot.send_entry_notification()
    â”‚
    â””â”€â–º Message sent:
        "ğŸŸ¢ ENTRY EXECUTED
        
        Symbol: EURUSD
        Direction: BUY
        Lots: 0.10
        Entry: 1.10000
        SL: 1.09000 (100 pips)
        TP: 1.11500 (150 pips)
        RR: 1:1.5
        
        Orders: A + B (Dual)
        Logic: LOGIC2 (1h)"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHASE 10: MONITORING STARTS                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â–º PriceMonitorService adds to watch list
    â”‚   - Monitor every 30s
    â”‚   - Check for TP/SL hits
    â”‚   - Watch for exit signals
    â”‚
    â”œâ”€â–º AutonomousSystemManager tracks
    â”‚   - Re-entry eligibility
    â”‚   - Recovery windows
    â”‚
    â””â”€â–º ProfitBookingManager watches Order B
        - Chain progression readiness
        - Level 2 trigger at TP hit
```

**Total Time**: ~2-5 seconds from alert to execution

---

## Workflow 2: Profit Chain Progression

```
Order B hits TP ($7 profit)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DETECTION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ PriceMonitorService detects closure
    â”‚ Position 123456790 closed
    â”‚ Profit: +$7.00
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CHAIN LOOKUP                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Database query:
    â”‚ SELECT * FROM profit_chains
    â”‚ WHERE position_id = 123456790
    â”‚
    â”‚ Result:
    â”‚ - Chain ID: CHAIN_EURUSD_20251225_001
    â”‚ - Current level: 1
    â”‚ - Symbol: EURUSD
    â”‚ - Direction: BUY
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NEXT LEVEL CALCULATION          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Current level: 1
    â”‚ Next level: 2
    â”‚
    â”‚ Multiplier (standard): 2^level
    â”‚ Lots = 0.10 Ã— 2 = 0.20
    â”‚
    â”‚ Calculate SL/TP for $10 risk / $7 profit
    â”‚ at 0.20 lots
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ORDER PLACEMENT                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Current price: 1.10500
    â”‚
    â”‚ Place new Order B:
    â”‚ - Symbol: EURUSD.a
    â”‚ - Type: BUY
    â”‚ - Lots: 0.20 (doubled)
    â”‚ - Entry: 1.10500
    â”‚ - SL: calculated
    â”‚ - TP: calculated
    â”‚ - Comment: "PROFIT_CHAIN_L2"
    â”‚
    â”‚ Position: 123456791
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DATABASE UPDATE                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ UPDATE profit_chains
    â”‚ SET current_level = 2,
    â”‚     position_id = 123456791,
    â”‚     total_profit = total_profit + 7
    â”‚ WHERE chain_id = 'CHAIN_EURUSD_...'
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOTIFICATION                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ "ğŸ“ˆ PROFIT CHAIN ADVANCED
    â”‚  
    â”‚  Chain: EURUSD_001
    â”‚  Level: 1 â†’ 2
    â”‚  Lots: 0.10 â†’ 0.20
    â”‚  Profit so far: $7
    â”‚  
    â”‚  Level 2 Order placed"
    â”‚
    â–¼
[REPEAT PROCESS FOR LEVELS 3,4,5]

If all 5 levels hit TP:
Total profit = $7 + $14 + $28 + $56 + $112 = $217
```

---

## Workflow 3: SL Hunt Re-entry

```
Order A hits SL
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SL HIT DETECTION                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Position 123456789 closed
    â”‚ Reason: Stop Loss
    â”‚ Loss: -$100
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RECOVERY WINDOW OPENED           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ ReentryManager.sl_hunt_check()
    â”‚
    â”‚ Create recovery window:
    â”‚ - Symbol: EURUSD
    â”‚ - Direction: BUY (original)
    â”‚ - SL price: 1.09000
    â”‚ - Required recovery: +1 pip
    â”‚ - Target price: 1.09010
    â”‚ - Window expiry: 5 minutes
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PRICE MONITORING (30s intervals) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Cycle 1 (30s): Price = 1.08995 âŒ
    â”‚ Cycle 2 (60s): Price = 1.09005 âŒ
    â”‚ Cycle 3 (90s): Price = 1.09015 âœ“
    â”‚
    â”‚ Recovery confirmed!
    â”‚ Price exceeded SL + 1 pip
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RE-ENTRY VALIDATION              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â–º Check attempt count: 0 (max 1) âœ“
    â”œâ”€â–º Check trend: Still BULLISH âœ“
    â”œâ”€â–º Check risk caps: Available âœ“
    â””â”€â–º Check re-entry level: 0 (max 2) âœ“
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SL REDUCTION CALCULATION         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Original SL distance: 100 pips
    â”‚ Reduction: 30%
    â”‚ New SL distance: 70 pips
    â”‚
    â”‚ Current price: 1.09015
    â”‚ New SL: 1.09015 - 0.00700 = 1.08315
    â”‚ New TP: 1.09015 + 0.01050 = 1.10065 (1.5x RR)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RE-ENTRY ORDER PLACEMENT         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Place order:
    â”‚ - Symbol: EURUSD.a
    â”‚ - Type: BUY
    â”‚ - Lots: 0.10
    â”‚ - Entry: 1.09015
    â”‚ - SL: 1.08315 (70 pips, reduced)
    â”‚ - TP: 1.10065 (105 pips)
    â”‚ - Comment: "SL_HUNT_RECOVERY"
    â”‚ - Re-entry level: 1
    â”‚
    â”‚ Position: 123456800
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOTIFICATION                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ "ğŸ”„ SL HUNT RE-ENTRY
    â”‚  
    â”‚  Symbol: EURUSD
    â”‚  Direction: BUY
    â”‚  Entry: 1.09015
    â”‚  SL: 1.08315 (70 pips, 30% reduced)
    â”‚  TP: 1.10065
    â”‚  
    â”‚  Recovery detected +1 pip
    â”‚  Re-entry level: 1/2"
    â”‚
    â–¼
[MONITOR FOR TP/SL]

If this hits SL again â†’ Max attempts (1) reached, no more re-entry
If this hits TP â†’ TP Continuation may trigger
```

---

## Workflow 4: Daily Startup & Recovery

```
Bot Starts (e.g., python src/main.py)
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INITIALIZATION                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â–º Load config.json
    â”œâ”€â–º Load .env variables
    â”œâ”€â–º Setup logging
    â””â”€â–º Initialize database
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MT5 CONNECTION                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ MT5Client.initialize()
    â”‚
    â”œâ”€â–º Connect to MT5 terminal
    â”‚   Login: 308646228
    â”‚   Server: XMGlobal-MT5 6
    â”‚
    â”‚ [SUCCESS] âœ“
    â”‚ Account Balance: $10,172.67
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MANAGERS INITIALIZATION          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â–º RiskManager (load tier settings)
    â”œâ”€â–º TimeframeTrendManager (load trends)
    â”œâ”€â–º DualOrderManager
    â”œâ”€â–º ProfitBookingManager
    â”œâ”€â–º ReentryManager
    â”œâ”€â–º AutonomousSystemManager
    â”œâ”€â–º ProfitProtectionManager
    â”œâ”€â–º SLReductionOptimizer
    â””â”€â–º ReverseShieldManager
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SESSION RECOVERY                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ SessionManager.recover_session()
    â”‚
    â”œâ”€â–º Query database for today's session
    â”‚   Result: SES_20251226_025000
    â”‚
    â”œâ”€â–º Query open positions from MT5
    â”‚   Positions found: 3
    â”‚
    â””â”€â–º Match positions to database trades
        - Position 123456789 â†’ Trade ID 456
        - Position 123456790 â†’ Trade ID 457 (Profit chain L1)
        - Position 123456800 â†’ Trade ID 458 (Re-entry L1)
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PROFIT CHAIN RECOVERY            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ ProfitBookingManager.recover_chains()
    â”‚
    â”œâ”€â–º Query active chains from database
    â”‚   Found: 1 chain (CHAIN_EURUSD_001)
    â”‚   Current level: 1
    â”‚   Position: 123456790
    â”‚
    â””â”€â–º Resume monitoring for TP hit
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SERVICES STARTUP                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â–º PriceMonitorService.start()
    â”‚   - Background task started
    â”‚   - Monitoring 3 positions
    â”‚   - Interval: 30s
    â”‚
    â”œâ”€â–º TelegramBot.start_polling()
    â”‚   - Webhook cleared
    â”‚   - Polling started
    â”‚   - Ready for commands
    â”‚
    â””â”€â–º TradingEngine.start()
        - Ready to receive signals
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STARTUP NOTIFICATION             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ TelegramBot sends:
    â”‚
    â”‚ "ğŸ¤– Bot Ready!
    â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
    â”‚  
    â”‚  Mode: LIVE TRADING
    â”‚  MT5: Connected âœ“
    â”‚  Balance: $10,172.67
    â”‚  
    â”‚  Active Positions: 3
    â”‚  Active Chains: 1
    â”‚  
    â”‚  Session: SES_20251226_025000
    â”‚  
    â”‚  All systems operational âœ“"
    â”‚
    â–¼
[BOT RUNNING - READY FOR SIGNALS]
```

---

## Workflow 5: Risk Cap Exceeded

```
Trade closes with -$60 loss
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LOSS TRACKING                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ RiskManager.track_loss()
    â”‚
    â”‚ Daily loss before: $50
    â”‚ This loss: $60
    â”‚ New daily loss: $110
    â”‚
    â”‚ Daily cap: $100
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CAP EXCEEDED DETECTION           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ $110 > $100 âŒ
    â”‚
    â”‚ CAP EXCEEDED!
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AUTO-PAUSE TRADING               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ TradingEngine.pause()
    â”‚
    â”‚ - Set is_paused = True
    â”‚ - Reject new signals
    â”‚ - Keep existing positions
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NOTIFICATION                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ TelegramBot sends:
    â”‚
    â”‚ "âš ï¸ TRADING PAUSED
    â”‚  
    â”‚  Daily loss cap exceeded!
    â”‚  
    â”‚  Used: $110 / $100
    â”‚  
    â”‚  Trading paused automatically.
    â”‚  Existing positions remain active.
    â”‚  
    â”‚  Actions available:
    â”‚  - Wait until midnight (auto-reset)
    â”‚  - Clear daily loss: /clear_daily_loss
    â”‚  - Increase cap: /set_daily_cap 200"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER DECISION                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Option 1: Wait until midnight
    â”‚    â†’ Auto-reset at 00:00 UTC
    â”‚    â†’ Trading resumes automatically
    â”‚
    â”‚ Option 2: Clear daily loss manually
    â”‚    â†’ User sends: /clear_daily_loss
    â”‚    â†’ Confirm action
    â”‚    â†’ Loss reset to $0
    â”‚    â†’ Trading resumed
    â”‚
    â”‚ Option 3: Increase cap
    â”‚    â†’ User sends: /set_daily_cap 200
    â”‚    â†’ Cap updated
    â”‚    â†’ $110 < $200 âœ“
    â”‚    â†’ Trading resumed
```

---

## Configuration Flow

```
User wants to change SL system from SL-1 to SL-2
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER ACTION                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Click "âš™ï¸ SL System" button
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MENU DISPLAY                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Bot sends SL System menu:
    â”‚
    â”‚ "âš™ï¸ SL SYSTEM CONTROL
    â”‚  
    â”‚  Current: SL-1 (Fixed)
    â”‚  
    â”‚  [View Config]
    â”‚  [Change System]
    â”‚  [Symbol-Specific SL]
    â”‚  [Reset All]"
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PARAMETER COLLECTION             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ User clicks: [Change System]
    â”‚
    â”‚ Bot sends options:
    â”‚ "[SL-1] [SL-2]"
    â”‚
    â”‚ User clicks: [SL-2]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONFIRMATION                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Bot sends:
    â”‚
    â”‚ "Confirm SL System Change?
    â”‚  
    â”‚  Current: SL-1
    â”‚  New: SL-2
    â”‚  
    â”‚  [âœ“ Confirm] [âœ— Cancel]"
    â”‚
    â”‚ User clicks: [âœ“ Confirm]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EXECUTION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ CommandExecutor.execute()
    â”‚
    â”œâ”€â–º Validate parameters
    â”œâ”€â–º Update config.json
    â”œâ”€â–º Reload configuration
    â””â”€â–º Update TradingEngine
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SUCCESS RESPONSE                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ "âœ… SL System Changed
    â”‚  
    â”‚  New system: SL-2 (Dynamic)
    â”‚  
    â”‚  Takes effect on next trade.
    â”‚  Existing trades unaffected."
```

---

## Error Handling Flow

```
Any operation in bot
    â†“
    TRY:
        [Normal execution]
    CATCH Exception:
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ERROR CAPTURE                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Log error with traceback
    â”‚ Category: MT5_ERROR / CONFIG_ERROR / etc.
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ERROR TRACKING                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Increment error counter
    â”‚ Store in error_stats
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GRACEFUL DEGRADATION             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ If MT5 error:
    â”‚    â†’ Fall back to simulation mode
    â”‚    â†’ Continue operation
    â”‚
    â”‚ If Telegram error:
    â”‚    â†’ Log to file instead
    â”‚    â†’ Continue operation
    â”‚
    â”‚ If critical error:
    â”‚    â†’ Pause trading
    â”‚    â†’ Alert user
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER NOTIFICATION                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”‚ Send error message:
    â”‚
    â”‚ "âš ï¸ ERROR OCCURRED
    â”‚  
    â”‚  Type: MT5 Connection Lost
    â”‚  Time: 2025-12-26 02:50:00
    â”‚  
    â”‚  Action taken:
    â”‚  - Switched to simulation mode
    â”‚  - Trading continues (simulated)
    â”‚  
    â”‚  Check: /health_status
    â”‚  Logs: /export_current_session"
```

---

**Summary**: à¤¯à¤¹ workflows complete picture à¤¦à¥‡à¤¤à¥‡ à¤¹à¥ˆà¤‚ à¤•à¤¿ bot à¤•à¥ˆà¤¸à¥‡ à¤•à¤¾à¤® à¤•à¤°à¤¤à¤¾ à¤¹à¥ˆ from signal to execution to recovery.

**Next**: Return to [INDEX.md](INDEX.md) for navigation
