â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¤– JULES AI - TASK 006 ASSIGNMENT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Hello Jules AI!

**NEW CRITICAL TASK ASSIGNED**

ğŸ“‹ TASK DETAILS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Task ID: JULES-TASK-006
Task: Error-Free Implementation & Hardening
Priority: ğŸ”´ CRITICAL
Estimated Time: 4-6 hours

ğŸ¯ YOUR MISSION:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Inject **ROBUSTNESS** into the bot. Prevent common crashes, timeouts, and race conditions.
âœ… Implement Global Callback Safety (Always answer query)
âœ… Implement State Locking (Asyncio locks)
âœ… Implement Safe Message Editing (Catch API errors)
âœ… Create Handler Verifier (Ensure 144 commands exist)

ğŸ“‚ KEY DOCUMENTS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. TASK FILE (READ FIRST):
   JULES_AI_TASK_006_ERROR_HANDLING.md

2. PLANNING DOCUMENT (SPECIFICATION):
   ZepixTradingBot-old-v2-main/Updates/V5 COMMAND TELEGRAM/05_ERROR_FREE_IMPLEMENTATION_GUIDE.md
   â””â”€ 906 lines of safety patterns

ğŸš¨ CRITICAL REQUIREMENTS:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸  NO SPINNER DEATH:
   - Every callback handler MUST call `query.answer()` immediately.
   - Implement a wrapper or middleware to enforce this.

âš ï¸  RACE CONDITION PROTECTION:
   - Use `asyncio.Lock` in `ConversationStateManager`.
   - Prevent User A from clicking "Next" twice instantly.

âš ï¸  STARTUP CHECK:
   - Scan all handlers on startup.
   - If `/positions` is missing -> CRASH IMMEDIATELY (Fail Fast).
   - Log missing commands clearly.

ğŸ“ DELIVERABLES (Push to Git):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Code in `src/telegram/core/`:
   - `callback_safety_manager.py` (New Middleware)
   - `handler_verifier.py` (Startup Check)

2. Code in `src/telegram/utils/`:
   - `message_utils.py` (Safe Edits)

3. Updates:
   - `conversation_state_manager.py` (Add Locking)
   - `controller_bot.py` (Use new safety tools)

4. Documentation:
   - `ERROR_HANDLING_NOTES.md`

ğŸš€ START COMMAND:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Read JULES_AI_TASK_006_ERROR_HANDLING.md
2. Create `CallbackSafetyManager` first
3. Update `ConversationStateManager` with locks
4. Create `SafeMessageEditor`
5. Create `HandlerVerifier`
6. Integrate & Test
7. Push to Git

Target Branch: `main`
Commit Message: "TASK 006 COMPLETE: Error-Free Hardening & Verification"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ready to BULLETPROOF the bot! ğŸš€
